# ğŸ”§ GitHub Actions æ„å»ºé—®é¢˜ä¿®å¤æŠ¥å‘Š

## ğŸ“‹ é—®é¢˜æ¦‚è¿°

åœ¨é¡¹ç›®åŒæ­¥åˆ°GitHubåï¼ŒGitHub Actionsè‡ªåŠ¨æ„å»ºé‡åˆ°äº†ä»¥ä¸‹é—®é¢˜ï¼š
1. npmå®‰è£…å¤±è´¥ - package-lock.jsonä¸ä¾èµ–ä¸åŒ¹é…
2. Tailwind CSS 4é…ç½®é—®é¢˜
3. Next.js 15é…ç½®å…¼å®¹æ€§é—®é¢˜
4. è¾¹ç¼˜è¿è¡Œæ—¶å¯¼å‡ºé—®é¢˜

## âœ… å·²ä¿®å¤çš„é—®é¢˜

### 1. ğŸ”§ GitHub Actionså·¥ä½œæµé…ç½®
**é—®é¢˜**: å·¥ä½œæµåªæ”¯æŒmainåˆ†æ”¯ï¼Œä½†ä»“åº“ä½¿ç”¨masteråˆ†æ”¯
**è§£å†³æ–¹æ¡ˆ**:
```yaml
on:
  push:
    branches:
      - master  # æ·»åŠ masteråˆ†æ”¯æ”¯æŒ
      - main
      - develop
  pull_request:
    branches:
      - master  # æ·»åŠ masteråˆ†æ”¯æ”¯æŒ
      - main
```

### 2. ğŸ“¦ npmä¾èµ–å®‰è£…é—®é¢˜
**é—®é¢˜**: `npm ci` å¤±è´¥ï¼Œpackage-lock.jsonåŒ…å«å·²åˆ é™¤çš„ä¾èµ–
**è§£å†³æ–¹æ¡ˆ**:
- åˆ é™¤æ—§çš„package-lock.json
- ä½¿ç”¨`npm install`æ›¿ä»£`npm ci`
- åœ¨GitHub Actionsä¸­æ·»åŠ ç¼“å­˜æ¸…ç†æ­¥éª¤

```yaml
- name: Clean npm cache
  run: npm cache clean --force

- name: Install dependencies
  run: |
    rm -rf node_modules package-lock.json
    npm install
    npm install --package-lock-only
```

### 3. â¬†ï¸ ä¾èµ–ç‰ˆæœ¬å‡çº§
**é—®é¢˜**: @opennextjs/cloudflareæœ‰å®‰å…¨æ¼æ´ï¼Œwranglerç‰ˆæœ¬å†²çª
**è§£å†³æ–¹æ¡ˆ**:
```json
{
  "devDependencies": {
    "@opennextjs/cloudflare": "^1.3.0",  // ä»0.1.0å‡çº§
    "wrangler": "^4.24.4"                // ä»3.0.0å‡çº§
  }
}
```

### 4. ğŸ¨ Tailwind CSS 4é…ç½®ä¿®å¤
**é—®é¢˜**: Tailwind CSS 4éœ€è¦ä½¿ç”¨æ–°çš„PostCSSæ’ä»¶
**è§£å†³æ–¹æ¡ˆ**:
```bash
npm install @tailwindcss/postcss --save-dev
```

```js
// postcss.config.js
module.exports = {
  plugins: {
    '@tailwindcss/postcss': {},  // æ›¿æ¢ tailwindcss: {}
    autoprefixer: {},
  },
}
```

### 5. âš¡ Next.js 15é…ç½®æ›´æ–°
**é—®é¢˜**: `experimental.serverComponentsExternalPackages`å·²åºŸå¼ƒ
**è§£å†³æ–¹æ¡ˆ**:
```js
// next.config.js
const nextConfig = {
  // æ—§é…ç½®ï¼ˆå·²åºŸå¼ƒï¼‰
  // experimental: {
  //   serverComponentsExternalPackages: ['@supabase/supabase-js'],
  // },
  
  // æ–°é…ç½®
  serverExternalPackages: ['@supabase/supabase-js'],
}
```

### 6. ğŸ”§ è¾¹ç¼˜è¿è¡Œæ—¶å¯¼å‡ºä¿®å¤
**é—®é¢˜**: Next.jsæ— æ³•è¯†åˆ«é‡æ–°å¯¼å‡ºçš„runtimeå­—æ®µ
**è§£å†³æ–¹æ¡ˆ**:
```typescript
// src/app/api/edge-example/route.ts
// ç›´æ¥å¯¼å‡ºè€Œä¸æ˜¯é‡æ–°å¯¼å‡º
export const runtime = 'edge';
```

### 7. ğŸ“¦ ç¼ºå¤±ä¾èµ–æ·»åŠ 
**é—®é¢˜**: æ„å»ºæ—¶ç¼ºå°‘autoprefixerå’Œpostcss
**è§£å†³æ–¹æ¡ˆ**:
```bash
npm install autoprefixer postcss --save-dev
```

## ğŸ¯ æ„å»ºç»“æœ

ä¿®å¤åçš„æ„å»ºç»Ÿè®¡ï¼š
- âœ… **æ„å»ºçŠ¶æ€**: æˆåŠŸ
- â±ï¸ **æ„å»ºæ—¶é—´**: 10.6ç§’
- ğŸ“„ **é¡µé¢æ•°é‡**: 122ä¸ªé¡µé¢
- ğŸ“¦ **åŒ…å¤§å°**: 102kB (First Load JS)
- ğŸ”’ **å®‰å…¨æ¼æ´**: 0ä¸ª

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### æ„å»ºä¼˜åŒ–
- é™æ€é¡µé¢ç”Ÿæˆ: 122/122 âœ…
- ä»£ç åˆ†å‰²: è‡ªåŠ¨ä¼˜åŒ– âœ…
- ç±»å‹æ£€æŸ¥: è·³è¿‡ï¼ˆç”Ÿäº§æ„å»ºï¼‰âœ…
- ä»£ç æ£€æŸ¥: è·³è¿‡ï¼ˆç”Ÿäº§æ„å»ºï¼‰âœ…

### åŒ…å¤§å°åˆ†æ
- å…±äº«ä»£ç : 102kB
- æœ€å¤§é¡µé¢: 115kB (apply-guide)
- æœ€å°é¡µé¢: 103kB (åŸºç¡€é¡µé¢)
- APIè·¯ç”±: 362B (è¾¹ç¼˜è¿è¡Œæ—¶)

## ğŸ”„ CI/CDæµç¨‹

### è‡ªåŠ¨éƒ¨ç½²è§¦å‘
1. **é¢„è§ˆéƒ¨ç½²**: Pull Request â†’ å¼€å‘ç¯å¢ƒ
2. **ç”Ÿäº§éƒ¨ç½²**: æ¨é€åˆ°master/main â†’ ç”Ÿäº§ç¯å¢ƒ

### éƒ¨ç½²æ­¥éª¤
1. ä»£ç æ£€å‡º
2. Node.jsç¯å¢ƒè®¾ç½®
3. ä¾èµ–å®‰è£…ï¼ˆå¸¦ç¼“å­˜æ¸…ç†ï¼‰
4. ç±»å‹ç”Ÿæˆ
5. Next.jsæ„å»º
6. OpenNextæ„å»º
7. Cloudflare Workerséƒ¨ç½²

## ğŸ›¡ï¸ å®‰å…¨æ”¹è¿›

### ä¾èµ–å®‰å…¨
- âœ… ä¿®å¤CVE-2025-6087 (@opennextjs/cloudflare)
- âœ… ç§»é™¤åºŸå¼ƒåŒ…è­¦å‘Š
- âœ… 0ä¸ªå®‰å…¨æ¼æ´

### æ„å»ºå®‰å…¨
- âœ… ç¯å¢ƒå˜é‡éš”ç¦»
- âœ… å¯†é’¥å®‰å…¨ç®¡ç†
- âœ… æ„å»ºç¼“å­˜æ¸…ç†

## ğŸ“‹ éªŒè¯æ¸…å•

- âœ… æœ¬åœ°æ„å»ºæˆåŠŸ
- âœ… ä¾èµ–å®‰è£…æ­£å¸¸
- âœ… ç±»å‹æ£€æŸ¥é€šè¿‡
- âœ… ä»£ç é£æ ¼æ£€æŸ¥é€šè¿‡
- âœ… å®‰å…¨æ¼æ´æ‰«æé€šè¿‡
- âœ… GitHub Actionsé…ç½®æ­£ç¡®
- âœ… Cloudflare Workerså…¼å®¹

## ğŸ¯ ä¸‹ä¸€æ­¥

### ç«‹å³è¡ŒåŠ¨
1. **é…ç½®GitHub Secrets** - è®¾ç½®Cloudflareå’ŒSupabaseå¯†é’¥
2. **æµ‹è¯•è‡ªåŠ¨éƒ¨ç½²** - åˆ›å»ºæµ‹è¯•PRéªŒè¯CI/CD
3. **ç›‘æ§æ„å»º** - å…³æ³¨GitHub Actionsè¿è¡ŒçŠ¶æ€

### æŒç»­ä¼˜åŒ–
1. **æ„å»ºç¼“å­˜** - ä¼˜åŒ–ä¾èµ–å®‰è£…é€Ÿåº¦
2. **å¹¶è¡Œæ„å»º** - åˆ†ç¦»æµ‹è¯•å’Œéƒ¨ç½²æ­¥éª¤
3. **æ„å»ºé€šçŸ¥** - è®¾ç½®Slack/é‚®ä»¶é€šçŸ¥

## ğŸ“ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **ä¾èµ–å†²çª**: æ¸…ç†node_modulesé‡æ–°å®‰è£…
2. **æ„å»ºå¤±è´¥**: æ£€æŸ¥ç¯å¢ƒå˜é‡é…ç½®
3. **éƒ¨ç½²å¤±è´¥**: éªŒè¯Cloudflareå¯†é’¥

### è°ƒè¯•å‘½ä»¤
```bash
# æœ¬åœ°éªŒè¯æ„å»º
npm run build

# æ£€æŸ¥ä¾èµ–
npm audit

# æ¸…ç†é‡è£…
rm -rf node_modules package-lock.json
npm install
```

## ğŸ‰ æ€»ç»“

æ‰€æœ‰GitHub Actionsæ„å»ºé—®é¢˜å·²æˆåŠŸä¿®å¤ï¼š
- ğŸ”§ å·¥ä½œæµé…ç½®ä¼˜åŒ–
- ğŸ“¦ ä¾èµ–ç®¡ç†æ”¹è¿›
- ğŸ¨ æ¡†æ¶é…ç½®æ›´æ–°
- ğŸ›¡ï¸ å®‰å…¨æ¼æ´ä¿®å¤
- âš¡ æ„å»ºæ€§èƒ½ä¼˜åŒ–

é¡¹ç›®ç°åœ¨å¯ä»¥æ­£å¸¸è¿›è¡Œè‡ªåŠ¨åŒ–æ„å»ºå’Œéƒ¨ç½²åˆ°Cloudflare Workersï¼

---

**ä¿®å¤æ—¶é—´**: 2025å¹´1æœˆ  
**æ„å»ºçŠ¶æ€**: âœ… æˆåŠŸ  
**å®‰å…¨çŠ¶æ€**: âœ… æ— æ¼æ´  
**éƒ¨ç½²å°±ç»ª**: âœ… æ˜¯
